<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>JRostand Repères Stade</title>
    <style>
        #map {
            height: 90vh;
            width: 100%;
        }
        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
            font-family: Arial, sans-serif;
        }
        h1 {
            text-align: center;
            margin: 10px 0;
        }
    </style>
</head>
<body>

<h1>JRostand Repères Stade</h1>
<hr>
<div id="map"></div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyA7Y32T_PJHZxYcK3BJYJFNwSl6cuvLXpo"></script>

<script>
var map;
var markersData = [];

// Charger les markers via Ajax
function loadMarkers() {
    $.ajax({
        url: "markersJrostand.json",
        method: "GET",
        dataType: "json",
        success: function(data) {
            markersData = data;
            initMap();
        },
        error: function(err) {
            console.error("Erreur Ajax :", err);
        }
    });
}

function initMap() {
    map = new google.maps.Map(document.getElementById("map"), {
        center: { lat: 48.9593, lng: 2.5478 }, // centre sur le lycée
        zoom: 15,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    });

    var polylinePath = [];
    var infoWindow = new google.maps.InfoWindow();

    for (let i = 0; i < markersData.length; i++) { // utiliser let pour garder la valeur de i
        let markerLatLng = new google.maps.LatLng(markersData[i].lat, markersData[i].lng);

        let marker = new google.maps.Marker({
            position: markerLatLng,
            map: map,
            title: "Point " + (i + 1)
        });
        marker.addListener("click", function() {

            alert("Marker cliqué :\nLatitude: " + markersData[i].lat + "\nLongitude: " + markersData[i].lng);

            infoWindow.setContent(
    "<strong>" + markersData[i].nom + "</strong><br>" +
    markersData[i].description + "<br><br>" +
    "<em>Latitude:</em> " + markersData[i].lat + "<br>" +
    "<em>Longitude:</em> " + markersData[i].lng
);
            infoWindow.open(map, marker);
        });

        polylinePath.push(markerLatLng);
    }

    polyline.setMap(map);
}

window.onload = loadMarkers;
</script>

</body>
</html>.